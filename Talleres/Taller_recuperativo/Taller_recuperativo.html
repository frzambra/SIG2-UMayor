<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xml:lang="es"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.36">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Dr.&nbsp;Francisco Zambrano">

<title>Taller Recuperativo (IMSE1017)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="Taller_recuperativo_files/libs/clipboard/clipboard.min.js"></script>
<script src="Taller_recuperativo_files/libs/quarto-html/quarto.js"></script>
<script src="Taller_recuperativo_files/libs/quarto-html/popper.min.js"></script>
<script src="Taller_recuperativo_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Taller_recuperativo_files/libs/quarto-html/anchor.min.js"></script>
<link href="Taller_recuperativo_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Taller_recuperativo_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Taller_recuperativo_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Taller_recuperativo_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Taller_recuperativo_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">Indice de contenidos</h2>
   
  <ul>
  <li><a href="#descripción" id="toc-descripción" class="nav-link active" data-scroll-target="#descripción"> <span class="header-section-number">1</span> Descripción</a></li>
  <li><a href="#objetivo-del-taller" id="toc-objetivo-del-taller" class="nav-link" data-scroll-target="#objetivo-del-taller"> <span class="header-section-number">2</span> Objetivo del taller</a></li>
  <li><a href="#paquetes-r" id="toc-paquetes-r" class="nav-link" data-scroll-target="#paquetes-r"> <span class="header-section-number">3</span> Paquetes R</a></li>
  <li><a href="#data" id="toc-data" class="nav-link" data-scroll-target="#data"> <span class="header-section-number">4</span> Data</a></li>
  <li><a href="#qué-debe-entregar" id="toc-qué-debe-entregar" class="nav-link" data-scroll-target="#qué-debe-entregar"> <span class="header-section-number">5</span> ¿Qué debe entregar?</a></li>
  <li><a href="#fecha-de-entrega" id="toc-fecha-de-entrega" class="nav-link" data-scroll-target="#fecha-de-entrega"> <span class="header-section-number">6</span> Fecha de entrega</a></li>
  <li><a href="#datos-raster-y-vectoriales" id="toc-datos-raster-y-vectoriales" class="nav-link" data-scroll-target="#datos-raster-y-vectoriales"> <span class="header-section-number">7</span> Datos raster y vectoriales</a>
  <ul class="collapse">
  <li><a href="#datos-vectorial" id="toc-datos-vectorial" class="nav-link" data-scroll-target="#datos-vectorial"> <span class="header-section-number">7.1</span> Datos vectorial</a></li>
  <li><a href="#datos-raster" id="toc-datos-raster" class="nav-link" data-scroll-target="#datos-raster"> <span class="header-section-number">7.2</span> Datos raster</a></li>
  </ul></li>
  <li><a href="#visualización-de-mapa-con-tmap" id="toc-visualización-de-mapa-con-tmap" class="nav-link" data-scroll-target="#visualización-de-mapa-con-tmap"> <span class="header-section-number">8</span> Visualización de mapa con <code>{tmap}</code></a>
  <ul class="collapse">
  <li><a href="#cree-un-mapa-que-tenga-las-siguientes-características." id="toc-cree-un-mapa-que-tenga-las-siguientes-características." class="nav-link" data-scroll-target="#cree-un-mapa-que-tenga-las-siguientes-características."> <span class="header-section-number">8.1</span> Cree un mapa que tenga las siguientes características.</a></li>
  <li><a href="#guardarexportar-el-mapa" id="toc-guardarexportar-el-mapa" class="nav-link" data-scroll-target="#guardarexportar-el-mapa"> <span class="header-section-number">8.2</span> Guardar/exportar el mapa</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Taller Recuperativo (IMSE1017)</h1>
<p class="subtitle lead">Uso de R como SIG</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Autor</div>
    <div class="quarto-title-meta-contents">
             <p>Dr.&nbsp;Francisco Zambrano </p>
          </div>
  </div>
    
    
  </div>
  

</header>

<section id="descripción" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="descripción"><span class="header-section-number">1</span> Descripción</h2>
<p>En las primeras clases de la asignatura se ha empezado a trabajar con el software R, partiendo por conocer la sintaxis, la IDE RStudio, las estructuras y tipos de datos. En el primer taller trabajó con datos que vienen incluidos en los paquetes base de R como <code>mtcars</code>, aplicando funciones que permitan identificar los tipos de objetos y su estructura, además de realizar proceso de indexación para diferentes tipos de objetos (ej, data.frame, matrix, listas). En el segundo taller, trabajó con datos climáticos en donde tuvo que importar los datos, realizar diferentes tipos de indexaciones, algunas operaciones matemáticas, y exportar los datos a un archivo. En el tercer taller comenzó a familiarizarce con datos vectoriales utilizando <code>{sf}</code>. Luego, el el taller número cuatro utilizó las operaciones geométricas con datos vectoriales y <code>{sf}</code>. Después, en el taller 5 trabajo con datos raster y vectoriales utilizando <code>{terra}</code> y <code>{sf}</code> Finalmente en el taller 6, creo mapas estáticos y dinámicos utilizando <code>{tmap}</code></p>
</section>
<section id="objetivo-del-taller" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="objetivo-del-taller"><span class="header-section-number">2</span> Objetivo del taller</h2>
<p>Utilizar R como herramienta de Sistema de Información Geográficas (SIG).</p>
</section>
<section id="paquetes-r" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="paquetes-r"><span class="header-section-number">3</span> Paquetes R</h2>
<p>Los paquetes con los que trabajaremos este taller so <code>{terra}</code>, <code>{sf}</code> y <code>{tmap}</code> los que nos permitirán trabajar con datos raster, vectoriales y crear mapas. Además va a utilizar un paquete adicional el cual permite descargar a <code>R</code> datos raster de elevación <code>{elevatr}</code>.</p>
<p>Para instalar los paquetes debe realizar lo siguiente:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># instala los paquetes</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="fu">c</span>(<span class="st">'sf'</span>,<span class="st">'terra'</span>,<span class="st">'tmap'</span>))</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># carga los paqutes en el entorno de R y permite utilizar </span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># las funciones adicionales que contienen</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(terra)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tmap)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="data" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="data"><span class="header-section-number">4</span> Data</h2>
<p>Trabajará con los datos vectoriales utilizados en la evaluación 2 correspondientes a <code>cuencas</code> y <code>estaciones</code>.</p>
</section>
<section id="qué-debe-entregar" class="level2" data-number="5">
<h2 data-number="5" class="anchored" data-anchor-id="qué-debe-entregar"><span class="header-section-number">5</span> ¿Qué debe entregar?</h2>
<p>Debeŕa utilizar RStudio para crear un script, el cual permitira generar los mapas indicados. Debe utilizar los comentarios (<code>#</code>) para hacer una descripción e incorporar cualquier información que ayude a entender lo realizado. A modo de ejemplo:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ejercicio 1:</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co"># comentario explicando lo que se hace</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  Aca va el script que resuelve el ejericio <span class="dv">1</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Debe guardar el script con el nombre <code>taller_recuperativo.R</code>. Los archivos los debe subir en el campus virtual en la sección <code>Actividades -&gt; Talleres -&gt; Taller_recuperativo</code></p>
</section>
<section id="fecha-de-entrega" class="level2" data-number="6">
<h2 data-number="6" class="anchored" data-anchor-id="fecha-de-entrega"><span class="header-section-number">6</span> Fecha de entrega</h2>
<p>Viernes 2 de diciembre hasta las 13:00am</p>
<!-- ## Data.frame y matrices -->
<!-- ### Trabajar con el `data.frame` `mtcars`: -->
<!-- 1)  muestre sólo las columnas `cyl`, `vs`, y `am.` -->
<!-- ```{r} -->
<!-- #| echo: false -->
<!-- #| eval: false -->
<!-- mtcars[c('cyl','vs','am')] -->
<!-- mtcars[c(2,8,9)] -->
<!-- ``` -->
<!-- 2)  muestre los valores de `disp`, `hp`, y `mpg` para la 3er y 6° fila (ej., Datsun 710 y Valiant) -->
<!-- ```{r} -->
<!-- #| echo: false -->
<!-- mtcars[c(3,6),c('disp','hp','mpg')] -->
<!-- mtcars[c(3,6),c(3,4,1)] -->
<!-- ``` -->
<!-- 3)  cambiar el valor de `wt` de la 2da fila a `NA` -->
<!-- ```{r} -->
<!-- #| echo: false -->
<!-- mtcars[2,'wt'] <- NA -->
<!-- head(mtcars) -->
<!-- mtcars[5:20,c('wt','disp')] <- NA -->
<!-- mtcars -->
<!-- ``` -->
<!-- ### Para los siguientes ejercicios deberá trabajar con la siguiente matriz: -->
<!-- ```{r} -->
<!-- #| echo: true -->
<!-- #| eval: true -->
<!-- numbers <- 1:40 -->
<!-- matriz_prueba <- matrix(numbers, nrow = 4) -->
<!-- rownames(matriz_prueba) <- letters[1:4] -->
<!-- colnames(matriz_prueba) <- LETTERS[1:10] -->
<!-- matriz_prueba -->
<!-- ``` -->
<!-- 1) Escriba dos formas de codigo en una linea para obtener la siguiente matriz: -->
<!-- ```{r} -->
<!-- #| echo: false -->
<!-- #| eval: true -->
<!-- matriz_prueba[,c("B","C","D","E")] -->
<!-- ``` -->
<!-- 2) Escriba con una linea de codigo cómo obtener la siguiente matriz: -->
<!-- ```{r} -->
<!-- #| echo: false -->
<!-- #| eval: true -->
<!-- matriz_prueba[,"A",drop = FALSE] -->
<!-- ``` -->
<!-- 3) Escriba una forma conveniente de obtener la siguiente matriz. -->
<!-- ```{r} -->
<!-- #| echo: true -->
<!-- #| eval: true -->
<!-- matriz_prueba[,-c(2,6)] -->
<!-- ``` -->
</section>
<section id="datos-raster-y-vectoriales" class="level2" data-number="7">
<h2 data-number="7" class="anchored" data-anchor-id="datos-raster-y-vectoriales"><span class="header-section-number">7</span> Datos raster y vectoriales</h2>
<p>Cargue los set de datos vectoriales y raster que se encuentran en el campus virtual:</p>
<ul>
<li>catfrut_valparaiso.gpkg: capa de la delimitación de los huertos frutales de la región de Valparaiso de acuerdo al catastro frutícola del año 2020-</li>
<li>chl_2022169_ET_500m.tif: estimación de la evapotrasnpiración real en Chile.</li>
</ul>
<section id="datos-vectorial" class="level3" data-number="7.1">
<h3 data-number="7.1" class="anchored" data-anchor-id="datos-vectorial"><span class="header-section-number">7.1</span> Datos vectorial</h3>
<p>Utilizando funciones de <code>{sf}</code>:</p>
<ol type="1">
<li>extraig ael Sistema de Referencia de Coordenadas de cada una de las capas.</li>
<li>extraiga el codigo EPSG de cada una de las capas vectoriales (canales, estaciones, comunas)</li>
<li>extraiga el tipo de geometria que tiene almacenada la capa vectorial.<br>
</li>
<li>extraiga la list-colum correspondiente a las geometrias<br>
</li>
<li>extraiga el data.frame (sin la geometria)<br>
</li>
<li>extraiga el número de columnas tiene la tabla de atributos<br>
</li>
<li>extraiga el número de entidades espaciales tiene la capa vectorial.<br>
</li>
<li>Cree un mapa con <code>plot</code> donde se pueda ver la variación respecto al tipo de especie fruticola.</li>
</ol>
</section>
<section id="datos-raster" class="level3" data-number="7.2">
<h3 data-number="7.2" class="anchored" data-anchor-id="datos-raster"><span class="header-section-number">7.2</span> Datos raster</h3>
<p>Utilizando funciones de <code>{terra}</code>:</p>
<ol type="1">
<li>extraiga la resolucíon espacial,</li>
<li>extraiga la cantidad de pixeles/celdas,</li>
<li>extraiga cantidad de columnas y filas</li>
<li>extraiga el sistema de referencia de coordenadas (SRC).</li>
<li>corte y enmascare el raster para la región de Valpariso.</li>
<li>cree un mapa con <code>plot</code> para visualizar la variación de NDVI en la región de Valparaiso.</li>
</ol>
</section>
</section>
<section id="visualización-de-mapa-con-tmap" class="level2" data-number="8">
<h2 data-number="8" class="anchored" data-anchor-id="visualización-de-mapa-con-tmap"><span class="header-section-number">8</span> Visualización de mapa con <code>{tmap}</code></h2>
<section id="cree-un-mapa-que-tenga-las-siguientes-características." class="level3" data-number="8.1">
<h3 data-number="8.1" class="anchored" data-anchor-id="cree-un-mapa-que-tenga-las-siguientes-características."><span class="header-section-number">8.1</span> Cree un mapa que tenga las siguientes características.</h3>
<ol type="1">
<li>muestre con variación de colores las diferentes especies frutícolas de la región de Valpariso (vectorial).</li>
<li>muestre los limites comunales de la región de Valparaiso</li>
<li>muestre la variación del índice NDVI (raster) de forma continua con una escala de colores <code>RdYlGn</code></li>
<li>tenga una flecha norte que no interfiera con los demas elementos del mapa</li>
<li>tenga una grilla en coordenadas UTM</li>
<li>no muestre la leyenda de las especies fruticolas</li>
<li>muestre la leyenda de la variación del índice NDVI</li>
<li>tenga un título “Especies frutícolas Región de Valparaiso”</li>
</ol>
</section>
<section id="guardarexportar-el-mapa" class="level3" data-number="8.2">
<h3 data-number="8.2" class="anchored" data-anchor-id="guardarexportar-el-mapa"><span class="header-section-number">8.2</span> Guardar/exportar el mapa</h3>
<ol type="1">
<li>Exporte el mapa como estatico en un archivo de imagen <code>.png</code></li>
<li>Exporte el mapa como interactivo en un archivo <code>.html</code></li>
</ol>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiada");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>